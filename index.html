<script>
  fetch("menu.json")
    .then(response => response.json())
    .then(data => {
      const container = document.getElementById("menu-container");

      Object.keys(data).forEach(category => {
        const section = document.createElement("div");
        section.innerHTML = `<h3 class="mt-4">${category}</h3><div class="row g-3"></div>`;
        const row = section.querySelector(".row");

        data[category].forEach(item => {
          // If pack with nested sections
          if (item.rice_selection || item.salad_and_accompaniments || item.desserts || item.beverages) {
            const packCard = document.createElement("div");
            packCard.className = "col-12";

            let innerHTML = `
              <div class="card shadow-sm mb-3">
                <div class="card-body">
                  <h5 class="card-title">${item.name} - ${item.price}</h5>
            `;

            // Nested sections
            const sections = [
              { title: "Rice Selection", data: item.rice_selection },
              { title: "Salad & Accompaniments", data: item.salad_and_accompaniments },
              { title: "Desserts", data: item.desserts },
              { title: "Beverages", data: item.beverages }
            ];

            sections.forEach(sec => {
              if (sec.data) {
                innerHTML += `<h6 class="mt-2">${sec.title}:</h6><div class="row g-2">`;
                sec.data.forEach(sub => {
                  innerHTML += `
                    <div class="col-md-3">
                      <div class="card p-2 border">
                        ${sub.name} - ${sub.price}
                      </div>
                    </div>
                  `;
                });
                innerHTML += `</div>`;
              }
            });

            innerHTML += `</div></div>`; // Close card-body and card
            packCard.innerHTML = innerHTML;
            row.appendChild(packCard);
          } else {
            // Normal item
            const itemCard = document.createElement("div");
            itemCard.className = "col-md-4";
            itemCard.innerHTML = `
              <div class="card shadow-sm">
                <div class="card-body">
                  <h5 class="card-title">${item.name}</h5>
                  <p class="card-text">${item.price}</p>
                </div>
              </div>
            `;
            row.appendChild(itemCard);
          }
        });

        container.appendChild(section);
      });
    });
</script>
